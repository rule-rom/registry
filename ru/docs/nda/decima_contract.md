# 🔒 Decima8: Спецификация машины

**Статус:** v0.2 DESIGN FREEZE  
**Кодовое имя:** Siberian Tank Interface

---

## 🔐 Доступ ограничен: Tier 3+ (Промышленник)

Эта страница содержит полную спецификацию нейроморфного ядра Decima8 v0.2.

> **Внимание:** Данный документ содержит детали реализации, включая точные формулы, тайминги и структуры данных. Доступ только для участников **Tier 3+**.

---

## 0) Scope / Non-Goals

### Scope (v0.2)

- **Один детерминированный ритм** для: Emulator → Proto (PCB) → FPGA → ASIC
- **Level16:** 0..15 на каждой из 8 линий данных
- **Двунаправленный обмен на VSB:**
  - Conductor задаёт входной вектор **до READ** и держит стабильно на апертуре READ
  - Island драйвит VSB только в WRITE (readout после WRITE)
- **Tile = минимальная программируемая сущность** (RuleROM адресует тайлы)
- **Все данные передаются только через общую шину BUS16** (8 lane)
- **Соседи формируют граф активации (эстафету):** locked-тайл активирует потомков для чтения BUS
- **Фьюз (LOCK) по диапазону:** тайл защёлкивается только если `thr_cur16 ∈ [thr_lo16..thr_hi16]`
- **Decay тянет к 0:** если `decay16>0`, аккумулятор каждый tick уменьшается по модулю к нулю и **никогда не перескакивает через 0**
- **Схлоп ветки:** если тайл становится неактивным (не ACTIVE), он принудительно сбрасывается в `thr_cur16=0, locked=0`

### Non-Goals (v0.2)

- Абсолютные вольтажи не фиксируются; фиксируется семантика Level16 + ритм
- Никаких изменений baked-параметров внутри EV_FLASH
- Совместимость со старым форматом v0.1 не требуется

---

## 1) Термины

| Термин | Описание |
|--------|----------|
| **Conductor** | Цифровой дирижёр (CPU), готовит вход, дергает EV_FLASH, делает bake/reset |
| **Island/Swarm** | Сеть тайлов + общая шина BUS16 (8 lane) поверх VSB |
| **Tile** | Узел ткани: 8 входных lane, 8 выходных lane, локальный FUSE, веса и routing_flags16 |
| **Level16** | Значение 0..15 (4 бита), семантика «уровня/энергии» |
| **READ phase** | Тайлы читают вход, обновляют runtime, НЕ драйвят BUS |
| **WRITE phase** | Conductor перестаёт драйвить шину, Island драйвит BUS16 |
| **Domain** | 0..15; группа тайлов для сброса thr_cur16/locked |
| **ACTIVE(t)** | Тайл «в цепочке живой»: может читать BUS16, вычисляться, применять decay |

---

## 2) Hard Constants (v0.2)

| Параметр | Значение |
|----------|----------|
| **VSB** | 8 линий данных VSB[0..7] |
| **BUS16** | 8 lane, суммирование вкладов в WRITE |
| **Domains** | 16 доменов (0..15) |
| **Level16** | 0..15 (4 бита) |
| **RoutingFlags16** | 10 используемых бит: N,E,S,W,NE,SE,SW,NW,BUS_R,BUS_W |

---

## 3) Фазы цикла (EV_FLASH)

```
┌─────────────────────────────────────────────────────────┐
│  EV_FLASH(tag_u32)                                      │
│  ┌─────────────┐  ┌────────────┐  ┌─────────────────┐  │
│  │ PHASE_READ  │→ │ TURNAROUND │→ │ PHASE_WRITE     │  │
│  │ (Island)    │  │ (зазор)    │  │ (Island)        │  │
│  └─────────────┘  └────────────┘  └─────────────────┘  │
│         ↓                ↓                  ↓           │
│    Семплирование    Conductor:      Тайлы выставляют  │
│    входа (VSB)      Hi-Z VSB        выходы в BUS16    │
│         ↓                ↓                  ↓           │
│  ┌─────────────────────────────────────────────────┐   │
│  │ READOUT_SAMPLE → Conductor читает BUS16[0..7]   │   │
│  └─────────────────────────────────────────────────┘   │
└─────────────────────────────────────────────────────────┘
```

**Target latency:** ~40µs на i5-3550 (Emulator)

---

## 4) Event Protocol

### Внешние события (API)

| Событие | Описание | Требования |
|---------|----------|------------|
| **EV_FLASH(tag_u32)** | Выполняет цикл READ→WRITE | BAKE_APPLIED==1 |
| **EV_RESET_DOMAIN(mask16)** | Сброс доменов | Между EV_FLASH |
| **EV_BAKE()** | Применение BakeBlob | Между EV_FLASH |

---

## 🔐 Полная спецификация

Остальные разделы спецификации (Tile Model, FUSE-LOCK логика, RoutingFlags16, BUS Semantics) доступны только участникам **Tier 3+** после подтверждения подписки.

### Что внутри полной версии:

- **Tile Model v0.2** — Baked state и runtime state тайла
- **FUSE-LOCK логика** — математическая модель затухания и активации
- **RoutingFlags16** — полная карта битов маршрутизации
- **BUS Semantics** — честное суммирование и обработка переполнений

---

## Как получить полный доступ

1. Станьте спонсором уровня **Tier 3 (Industrialist)** или выше на [Boosty](https://boosty.to/intentgarden)
2. После подтверждения вы получите доступ к:
   - Полной спецификации с формулами
   - Референс-реализации эмулятора
   - Документации по интеграции

### 🧠 Personas Store (Coming Soon)

В разработке — магазин нейроморфных личностей. Tier 3+ получают возможность:
- Занять нишу в будущем сторе личностей
- Предложить свою личность для публикации
- Получать роялти с использования

---

## Ссылки

- [Обзор Decima8](decima_overview.md)
- [Принцип пропекания](baking_principle.md)
- [Форматы TLV и UDP](formats.md)
- [Boosty: Intent-Garden](https://boosty.to/intentgarden)
- [Иерархия Сварма](../spec/hierarchy.md)

---

**Bake the Future. Build the Substrate.** 🛠️⚡️
