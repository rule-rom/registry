# üîí Decima8: –§–æ—Ä–º–∞—Ç—ã TLV –∏ UDP

**–í–µ—Ä—Å–∏—è:** v0.2  
**–°—Ç–∞—Ç—É—Å:** DESIGN FREEZE

---

## üîê –î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω: Tier 3+ (–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–∏–∫)

–≠—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ Decima8.

> **–í–Ω–∏–º–∞–Ω–∏–µ:** –î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ—á–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö, offset'—ã –ø–æ–ª–µ–π –∏ –∞–ª–≥–æ—Ä–∏—Ç–º—ã CRC. –î–æ—Å—Ç—É–ø —Ç–æ–ª—å–∫–æ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ **Tier 3+**.

---

## 1) Bake Binary TLV Spec v0.2

### –û–±—â–∏–µ –ø—Ä–∞–≤–∏–ª–∞

- **Endian:** Little-endian
- **–í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ:** 4-–±–∞–π—Ç boundary
- **CRC32:** IEEE (zlib/crc32) –ø–æ –≤—Å–µ–º—É blob

### Header (28 bytes)

```
BakeBlobHeader:
  magic         char[4]  = "D8BK"
  version       u16      = 2.0
  flags         u32
  total_len     u32
  bake_id       u32
  profile_id    u32
  reserved      u32
```

### TLV —Å–µ–∫—Ü–∏–∏

| Section | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|----------|
| **TOPOLOGY** | –¢–æ–ø–æ–ª–æ–≥–∏—è –º–∞—Å—Å–∏–≤–∞ —Ç–∞–π–ª–æ–≤ (—Ä–∞–∑–º–µ—Ä—ã, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ) |
| **TILE_PARAMS** | –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–ª–∞ (–ø–æ—Ä–æ–≥–∏, decay, –¥–æ–º–µ–Ω—ã) |
| **ROUTING_FLAGS** | –§–ª–∞–≥–∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–ª–∞ |
| **WEIGHTS** | –ú–∞—Ç—Ä–∏—Ü—ã –≤–µ—Å–æ–≤ 8√ó8 –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–ª–∞ |
| **RESET_MASKS** | –ú–∞—Å–∫–∏ –∞–≤—Ç–æ-—Å–±—Ä–æ—Å–∞ –ø–æ –¥–æ–º–µ–Ω–∞–º |
| **READOUT_POLICY** | –ü–æ–ª–∏—Ç–∏–∫–∞ —á—Ç–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |
| **CRC32** | –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ –≤—Å–µ–≥–æ blob |

> **–ü–æ–ª–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã TLV —Å offset'–∞–º–∏ –∏ —Ç–∏–ø–∞–º–∏ –ø–æ–ª–µ–π –¥–æ—Å—Ç—É–ø–Ω—ã —Ç–æ–ª—å–∫–æ Tier 3+.**

---

## 2) Load-time Validation

–ó–∞–≥—Ä—É–∑—á–∏–∫ bake –æ–±—è–∑–∞–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. ‚úÖ magic/version/total_len
2. ‚úÖ –ù–∞–ª–∏—á–∏–µ –≤—Å–µ—Ö –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö TLV —Å–µ–∫—Ü–∏–π
3. ‚úÖ –î–ª–∏–Ω—ã —Å–µ–∫—Ü–∏–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Ç–æ–ø–æ–ª–æ–≥–∏–∏
4. ‚úÖ CRC32 —Å—Ö–æ–¥–∏—Ç—Å—è
5. ‚úÖ reserved-–ø–æ–ª—è = 0
6. ‚úÖ `thr_lo16 <= thr_hi16` –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∞–π–ª–∞
7. ‚úÖ `tile_count == tile_w √ó tile_h`

---

## 3) UDP Protocol (packet_v1)

**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:** –∫–∞—Å–∫–∞–¥–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω Decima8

### –§–æ—Ä–º–∞—Ç –ø–∞–∫–µ—Ç–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  UDP Packet (37 bytes)                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  ‚îÇ Header (magic, version, flags, frame_tag)        ‚îÇ  ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§  ‚îÇ
‚îÇ  ‚îÇ Payload (domain, pattern, masks, winner, bus)    ‚îÇ  ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ–ª—è –ø–∞–∫–µ—Ç–∞

| –ì—Ä—É–ø–ø–∞ | –ü–æ–ª—è |
|--------|------|
| **Header** | magic ('D8UP'), version, flags, frame_tag |
| **Identity** | domain_id, pattern_id |
| **Control** | reset_mask16, collision_mask16 |
| **Status** | winner_tile_id, cycle_time_us, flags32_last |
| **Data** | bus16[8] ‚Äî –∑–Ω–∞—á–µ–Ω–∏—è —à–∏–Ω—ã |

### Flags (bitfield)

| –ë–∏—Ç | –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|------|----------|
| 0 | has_winner | winner_tile_id –≤–∞–ª–∏–¥–µ–Ω |
| 1 | has_bus | bus16 –≤–∞–ª–∏–¥–µ–Ω |
| 2 | has_cycle | cycle_time_us –≤–∞–ª–∏–¥–µ–Ω |
| 3 | has_flags | flags32_last –≤–∞–ª–∏–¥–µ–Ω |

> **–¢–æ—á–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–∫–µ—Ç–∞ —Å offset'–∞–º–∏ –∏ —Ç–∏–ø–∞–º–∏ –ø–æ–ª–µ–π –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ Tier 3+.**

---

## 4) Runtime FLAGS

Island –æ—Ç–¥–∞—ë—Ç FLAGS32:

| –ë–∏—Ç | –§–ª–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|------|----------|
| 0 | READY_LAST | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ü–∏–∫–ª–∞ |
| 1 | OVF_ANY_LAST | –ü–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏–µ –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ü–∏–∫–ª–µ |
| 2 | COLLIDE_ANY_LAST | –ö–æ–ª–ª–∏–∑–∏—è –≤ –ø–æ—Å–ª–µ–¥–Ω–µ–º —Ü–∏–∫–ª–µ |

---

## 5) –ú–µ—Ç—Ä–∏–∫–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Target |
|-----------|--------|
| **EV_FLASH (IDE)** | ~40¬µs (i5-3550) |
| **UDP Cascade** | ~20¬µs latency |

---

## –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø

1. –°—Ç–∞–Ω—å—Ç–µ —Å–ø–æ–Ω—Å–æ—Ä–æ–º —É—Ä–æ–≤–Ω—è **Tier 3 (Industrialist)** –∏–ª–∏ –≤—ã—à–µ
2. –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
   - –ü–æ–ª–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã TLV –∏ UDP
   - Reference implementation
   - –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

---

## –°—Å—ã–ª–∫–∏

- [–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –º–∞—à–∏–Ω—ã](decima_contract.md)
- [–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å Decima-API](decima_integration.md)
- [Boosty: Intent-Garden](https://boosty.to/intentgarden)
- [–ò–µ—Ä–∞—Ä—Ö–∏—è –°–≤–∞—Ä–º–∞](../spec/hierarchy.md)

---

**Bake the Future. Build the Substrate.** üõ†Ô∏è‚ö°Ô∏è
